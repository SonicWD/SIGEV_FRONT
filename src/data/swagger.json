{"swagger": "2.0", "info": {"title": "SIGEV API", "description": "API para el Sistema de Gestión de Vacunación", "termsOfService": "https://www.google.com/policies/terms/", "contact": {"email": "contact@sigev.com"}, "license": {"name": "BSD License"}, "version": "v1"}, "host": "127.0.0.1:8000", "schemes": ["http"], "basePath": "/", "consumes": ["application/json"], "produces": ["application/json"], "securityDefinitions": {"Basic": {"type": "basic"}}, "security": [{"Basic": []}], "paths": {"/auditoria/bitacoras/": {"get": {"operationId": "auditoria_bitacoras_list", "description": "", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Bitacora"}}}}, "tags": ["auditoria"]}, "post": {"operationId": "auditoria_bitacoras_create", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Bitacora"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Bitacora"}}}, "tags": ["auditoria"]}, "parameters": []}, "/auditoria/bitacoras/{id}/": {"get": {"operationId": "auditoria_bitacoras_read", "description": "", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Bitacora"}}}, "tags": ["auditoria"]}, "put": {"operationId": "auditoria_bitacoras_update", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Bitacora"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Bitacora"}}}, "tags": ["auditoria"]}, "patch": {"operationId": "auditoria_bitacoras_partial_update", "description": "", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Bitacora"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Bitacora"}}}, "tags": ["auditoria"]}, "delete": {"operationId": "auditoria_bitacoras_delete", "description": "", "parameters": [], "responses": {"204": {"description": ""}}, "tags": ["auditoria"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/citas/": {"get": {"operationId": "citas_list", "description": "Lista todas las citas registradas. Solo admin o médico.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/CitaVacunacion"}}}, "403": {"description": "No autorizado"}}, "tags": ["citas"]}, "parameters": []}, "/citas/actualizar/{cita_id}/": {"put": {"operationId": "citas_actualizar_update", "description": "Actualiza la información de una cita. Solo admin o médico.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/CitaVacunacion"}}, {"name": "cita_id", "in": "path", "description": "ID de la cita", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/CitaVacunacion"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["citas"]}, "parameters": [{"name": "cita_id", "in": "path", "required": true, "type": "string"}]}, "/citas/cancelar/{cita_id}/": {"delete": {"operationId": "citas_cancelar_delete", "description": "Cancela (elimina lógicamente) una cita de vacunación. Solo admin o médico.", "parameters": [{"name": "cita_id", "in": "path", "description": "ID de la cita", "type": "integer", "required": true}], "responses": {"200": {"description": "Cita cancelada"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrada"}}, "tags": ["citas"]}, "parameters": [{"name": "cita_id", "in": "path", "required": true, "type": "string"}]}, "/citas/crear/": {"post": {"operationId": "citas_crear_create", "description": "Crea una nueva cita de vacunación. Solo admin o médico.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/CitaVacunacion"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/CitaVacunacion"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}}, "tags": ["citas"]}, "parameters": []}, "/citas/paciente/": {"get": {"operationId": "citas_paciente_list", "description": "Lista las citas del paciente autenticado. Solo pacientes.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/CitaVacunacion"}}}, "403": {"description": "No autorizado"}}, "tags": ["citas"]}, "parameters": []}, "/citas/{cita_id}/estado/": {"patch": {"operationId": "citas_estado_partial_update", "description": "Actualiza el estado de una cita (pendiente, confirmada, cancelada, completada). Solo admin o médico.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"required": ["estado_cita"], "type": "object", "properties": {"estado_cita": {"description": "Nuevo estado de la cita", "type": "string"}}}}, {"name": "cita_id", "in": "path", "description": "ID de la cita", "type": "integer", "required": true}], "responses": {"200": {"description": "Estado actualizado", "schema": {"$ref": "#/definitions/CitaVacunacion"}}, "400": {"description": "Estado inválido"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["citas"]}, "parameters": [{"name": "cita_id", "in": "path", "required": true, "type": "string"}]}, "/citas/{id}/": {"get": {"operationId": "citas_read", "description": "Consulta el detalle de una cita específica. Solo admin o médico.", "parameters": [{"name": "pk", "in": "path", "description": "ID de la cita", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/CitaVacunacion"}}, "404": {"description": "No encontrado"}, "403": {"description": "No autorizado"}}, "tags": ["citas"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/dosis/actualizar/": {"put": {"operationId": "dosis_actualizar_update", "description": "Actualiza la información de una dosis. Solo administrador.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Dosis"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Dosis"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["dosis"]}, "parameters": []}, "/dosis/crear/": {"post": {"operationId": "dosis_crear_create", "description": "Crea una nueva dosis asociada a un esquema y vacuna. Solo administrador.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Dosis"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/Dosis"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}}, "tags": ["dosis"]}, "parameters": []}, "/dosis/listar/": {"get": {"operationId": "dosis_listar_list", "description": "Lista todas las dosis registradas. Admin y médico.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Dosis"}}}, "403": {"description": "No autorizado"}}, "tags": ["dosis"]}, "parameters": []}, "/dosis/{id_esquema}/esquema/": {"get": {"operationId": "dosis_esquema_list", "description": "Lista todas las dosis asociadas a un esquema específico. Admin y médico.", "parameters": [{"name": "id_esquema", "in": "path", "description": "ID del esquema", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Dosis"}}}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["dosis"]}, "parameters": [{"name": "id_esquema", "in": "path", "required": true, "type": "string"}]}, "/dosis/{id_vacuna}/vacuna/": {"get": {"operationId": "dosis_vacuna_list", "description": "Lista todas las dosis asociadas a una vacuna específica. Admin y médico.", "parameters": [{"name": "id_vacuna", "in": "path", "description": "ID de la vacuna", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Dosis"}}}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["dosis"]}, "parameters": [{"name": "id_vacuna", "in": "path", "required": true, "type": "string"}]}, "/dosis/{id}/": {"get": {"operationId": "dosis_read", "description": "Consulta el detalle de una dosis específica. Admin y médico.", "parameters": [{"name": "id", "in": "path", "description": "ID de la dosis", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Dosis"}}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["dosis"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/dosis/{id}/eliminar/": {"delete": {"operationId": "dosis_eliminar_delete", "description": "Marca una dosis como inactiva (soft delete). Solo administrador.", "parameters": [{"name": "id", "in": "path", "description": "ID de la dosis", "type": "integer", "required": true}], "responses": {"200": {"description": "Dosis inactivada"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrada"}}, "tags": ["dosis"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/esquema-vacunacion/esquemas/": {"get": {"operationId": "esquema-vacunacion_esquemas_list", "description": "Obtiene la lista de todos los esquemas de vacunación. Solo admin o médico.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/EsquemaVacunacion"}}}, "403": {"description": "No autorizado"}}, "tags": ["esquema-vacunacion"]}, "parameters": []}, "/esquema-vacunacion/esquemas/actualizar/": {"put": {"operationId": "esquema-vacunacion_esquemas_actualizar_update", "description": "Actualiza un esquema de vacunación existente. El id debe ir en el body. Solo administrador.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/EsquemaVacunacion"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/EsquemaVacunacion"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["esquema-vacunacion"]}, "parameters": []}, "/esquema-vacunacion/esquemas/registrar/": {"post": {"operationId": "esquema-vacunacion_esquemas_registrar_create", "description": "Registra un nuevo esquema de vacunación. Solo administrador.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/EsquemaVacunacion"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/EsquemaVacunacion"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}}, "tags": ["esquema-vacunacion"]}, "parameters": []}, "/esquema-vacunacion/esquemas/{id}/detalle/": {"get": {"operationId": "esquema-vacunacion_esquemas_detalle_list", "description": "Obtiene el detalle de un esquema de vacunación por su ID. Solo admin o médico.", "parameters": [{"name": "id", "in": "path", "description": "ID del esquema", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/EsquemaVacunacion"}}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["esquema-vacunacion"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/esquema-vacunacion/esquemas/{id}/eliminar/": {"delete": {"operationId": "esquema-vacunacion_esquemas_eliminar_delete", "description": "Inactiva (soft delete) un esquema de vacunación por su ID. Solo administrador.", "parameters": [{"name": "id", "in": "path", "description": "ID del esquema", "type": "integer", "required": true}], "responses": {"200": {"description": "Esquema inactivado"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["esquema-vacunacion"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/inventario-vacunas/": {"get": {"operationId": "inventario-vacunas_list", "description": "Retorna la lista completa de vacunas en inventario. Admin y médico.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/InventarioVacunas"}}}, "403": {"description": "No autorizado"}}, "tags": ["inventario-vacunas"]}, "parameters": []}, "/inventario-vacunas/actualizar/": {"put": {"operationId": "inventario-vacunas_actualizar_update", "description": "Modifica la información de un lote de inventario registrado. Solo administrador.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/InventarioVacunas"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/InventarioVacunas"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["inventario-vacunas"]}, "parameters": []}, "/inventario-vacunas/disponibilidad/{id_vacuna}/": {"get": {"operationId": "inventario-vacunas_disponibilidad_read", "description": "Lista los lotes disponibles de una vacuna (stock > 0 y sin vencer). Solo admin o médico.", "parameters": [{"name": "id_vacuna", "in": "path", "description": "ID de la vacuna", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/InventarioVacunas"}}}, "403": {"description": "No autorizado"}}, "tags": ["inventario-vacunas"]}, "parameters": [{"name": "id_vacuna", "in": "path", "required": true, "type": "string"}]}, "/inventario-vacunas/eliminar/{id}/": {"delete": {"operationId": "inventario-vacunas_eliminar_delete", "description": "Elimina o inactiva un registro de inventario (soft delete). Solo administrador.", "parameters": [{"name": "id", "in": "path", "description": "ID del inventario", "type": "integer", "required": true}], "responses": {"200": {"description": "Inventario inactivado"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["inventario-vacunas"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/inventario-vacunas/reducir/{id}/": {"patch": {"operationId": "inventario-vacunas_reducir_partial_update", "description": "Reduce la cantidad disponible de un lote de inventario al aplicar vacuna. Solo admin o médico.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"required": ["cantidad_aplicada"], "type": "object", "properties": {"cantidad_aplicada": {"description": "Cantidad aplicada", "type": "integer"}}}}, {"name": "id", "in": "path", "description": "ID del inventario", "type": "integer", "required": true}], "responses": {"200": {"description": "Stock actualizado"}, "400": {"description": "Error de stock o datos"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["inventario-vacunas"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/inventario-vacunas/registrar/": {"post": {"operationId": "inventario-vacunas_registrar_create", "description": "Registrar un nuevo lote de vacunas en inventario. Solo administrador.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/InventarioVacunas"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/InventarioVacunas"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}}, "tags": ["inventario-vacunas"]}, "parameters": []}, "/inventario-vacunas/{id}/": {"get": {"operationId": "inventario-vacunas_read", "description": "Consulta el detalle de un lote de inventario por ID. Admin y médico.", "parameters": [{"name": "id", "in": "path", "description": "ID del inventario", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/InventarioVacunas"}}, "404": {"description": "No encontrado"}, "403": {"description": "No autorizado"}}, "tags": ["inventario-vacunas"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/medicos/actualizar-perfil/": {"put": {"operationId": "medicos_actualizar-perfil_update", "description": "", "parameters": [], "responses": {"200": {"description": ""}}, "tags": ["medicos"]}, "parameters": []}, "/medicos/admin/{id}/": {"get": {"operationId": "medicos_admin_read", "description": "", "parameters": [], "responses": {"200": {"description": ""}}, "tags": ["medicos"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/medicos/admin/{id}/eliminar/": {"delete": {"operationId": "medicos_admin_eliminar_delete", "description": "Elimina o inactiva un médico (soft delete). Solo admin.", "parameters": [{"name": "id", "in": "path", "description": "ID del médico", "type": "integer", "required": true}], "responses": {"200": {"description": "Médico inactivado"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["medicos"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/medicos/listar/": {"get": {"operationId": "medicos_listar_list", "description": "Lista todos los médicos activos. Solo admin.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Medico"}}}, "403": {"description": "No autorizado"}}, "tags": ["medicos"]}, "parameters": []}, "/medicos/mi-perfil/": {"get": {"operationId": "medicos_mi-perfil_list", "description": "", "parameters": [], "responses": {"200": {"description": ""}}, "tags": ["medicos"]}, "parameters": []}, "/paciente-esquema/asignar/": {"post": {"operationId": "paciente-esquema_asignar_create", "description": "Asigna un esquema de vacunación a un paciente.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/PacienteEsquema"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/PacienteEsquema"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}}, "tags": ["paciente-esquema"]}, "parameters": []}, "/paciente-esquema/{id}/desactivar/": {"put": {"operationId": "paciente-esquema_desactivar_update", "description": "Desactiva (soft delete) una asignación de esquema a paciente.", "parameters": [{"name": "id", "in": "path", "description": "ID de la asignación", "type": "integer", "required": true}], "responses": {"200": {"description": "Asignación desactivada"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["paciente-esquema"]}, "delete": {"operationId": "paciente-esquema_desactivar_delete", "description": "Desactiva (soft delete) una asignación de esquema a paciente (DELETE).", "parameters": [{"name": "id", "in": "path", "description": "ID de la asignación", "type": "integer", "required": true}], "responses": {"200": {"description": "Asignación desactivada"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["paciente-esquema"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/paciente-esquema/{id}/esquemas/": {"get": {"operationId": "paciente-esquema_esquemas_list", "description": "Lista los pacientes asignados a un esquema de vacunación.", "parameters": [{"name": "id", "in": "path", "description": "ID del esquema", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/PacienteEsquema"}}}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["paciente-esquema"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/paciente-esquema/{id}/pacientes/": {"get": {"operationId": "paciente-esquema_pacientes_list", "description": "Lista los esquemas asignados a un paciente.", "parameters": [{"name": "id", "in": "path", "description": "ID del paciente", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/PacienteEsquema"}}}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["paciente-esquema"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/pacientes/": {"get": {"operationId": "pacientes_list", "description": "Lista todos los pacientes activos. Solo admin y médico.", "parameters": [], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Paciente"}}}, "403": {"description": "No autorizado"}}, "tags": ["pacientes"]}, "parameters": []}, "/pacientes/admin/actualizar/": {"put": {"operationId": "pacientes_admin_actualizar_update", "description": "Modifica la información de un paciente registrado. Solo admin, médico y el propio paciente.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/Paciente"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Paciente"}}, "400": {"description": "Datos inválidos"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["pacientes"]}, "parameters": []}, "/pacientes/admin/{id}/eliminar/": {"delete": {"operationId": "pacientes_admin_eliminar_delete", "description": "Elimina o inactiva un paciente (soft delete). Solo admin.", "parameters": [{"name": "id", "in": "path", "description": "ID del paciente", "type": "integer", "required": true}], "responses": {"200": {"description": "Paciente inactivado"}, "403": {"description": "No autorizado"}, "404": {"description": "No encontrado"}}, "tags": ["pacientes"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/pacientes/mi-perfil/": {"get": {"operationId": "pacientes_mi-perfil_list", "description": "", "parameters": [], "responses": {"200": {"description": ""}}, "tags": ["pacientes"]}, "parameters": []}, "/pacientes/{id}/": {"get": {"operationId": "pacientes_read", "description": "Consulta el detalle de un paciente por ID. Solo admin, médico y el propio paciente.", "parameters": [{"name": "id", "in": "path", "description": "ID del paciente", "type": "integer", "required": true}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Paciente"}}, "404": {"description": "No encontrado"}, "403": {"description": "No autorizado"}}, "tags": ["pacientes"]}, "put": {"operationId": "pacientes_update", "description": "", "parameters": [], "responses": {"200": {"description": ""}}, "tags": ["pacientes"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/registro-vacunacion/listar/": {"get": {"operationId": "registro-vacunacion_listar_list", "description": "Lista todos los registros de vacunación activos. Solo médicos o administradores pueden acceder.", "parameters": [], "responses": {"200": {"description": "Listado exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "array", "items": {"type": "object"}}}}}, "403": {"description": "No autorizado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["registro-vacunacion"]}, "parameters": []}, "/registro-vacunacion/paciente/{id_paciente}/": {"get": {"operationId": "registro-vacunacion_paciente_read", "description": "Lista el historial de vacunación de un paciente. Solo el paciente, su médico o un administrador pueden acceder.", "parameters": [{"name": "id_paciente", "in": "path", "description": "ID del paciente", "required": true, "type": "integer"}], "responses": {"200": {"description": "Listado exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "array", "items": {"type": "object"}}}}}, "403": {"description": "No autorizado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}, "404": {"description": "Paciente no encontrado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["registro-vacunacion"]}, "parameters": [{"name": "id_paciente", "in": "path", "required": true, "type": "string"}]}, "/registro-vacunacion/paciente/{id_paciente}/exportar/": {"get": {"operationId": "registro-vacunacion_paciente_exportar_list", "description": "Genera un PDF con el historial de vacunación del paciente.", "parameters": [], "responses": {"200": {"description": ""}}, "tags": ["registro-vacunacion"]}, "parameters": [{"name": "id_paciente", "in": "path", "required": true, "type": "string"}]}, "/registro-vacunacion/registrar/": {"post": {"operationId": "registro-vacunacion_registrar_create", "description": "Registra la aplicación de una vacuna a un paciente. Solo médicos o administradores pueden registrar vacunación. Valida la cita si se provee.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/RegistroVacunacion"}}], "responses": {"201": {"description": "Registro exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "object"}}}, "examples": {"application/json": {"code": 201, "error": null, "data": {"id": 1, "paciente": 1, "vacuna": 1, "medico": 1, "usuario": 1, "fecha_aplicacion": "2024-06-01T12:00:00Z", "lote": "L123", "observaciones": "", "cita": 1, "ubicacion": "Consultorio A", "firma_digital": "base64string", "activo": true}}}}, "400": {"description": "Error de validación o negocio", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}, "403": {"description": "No autorizado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["registro-vacunacion"]}, "parameters": []}, "/registro-vacunacion/vacuna/{id_vacuna}/": {"get": {"operationId": "registro-vacunacion_vacuna_read", "description": "Lista los registros de vacunación asociados a una vacuna específica. Solo médicos o administradores pueden acceder.", "parameters": [{"name": "id_vacuna", "in": "path", "description": "ID de la vacuna", "required": true, "type": "integer"}], "responses": {"200": {"description": "Listado exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "array", "items": {"type": "object"}}}}}, "403": {"description": "No autorizado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["registro-vacunacion"]}, "parameters": [{"name": "id_vacuna", "in": "path", "required": true, "type": "string"}]}, "/registro-vacunacion/{id}/": {"get": {"operationId": "registro-vacunacion_read", "description": "Consulta un registro de vacunación individual. Solo médicos o administradores pueden acceder.", "parameters": [{"name": "id", "in": "path", "description": "ID del registro", "required": true, "type": "integer"}], "responses": {"200": {"description": "Consulta exitosa", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "object"}}}}, "403": {"description": "No autorizado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}, "404": {"description": "Registro no encontrado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["registro-vacunacion"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/registro-vacunacion/{id}/eliminar/": {"delete": {"operationId": "registro-vacunacion_eliminar_delete", "description": "Elimina (lógicamente) un registro de vacunación. Solo médicos o administradores pueden eliminar.", "parameters": [{"name": "id", "in": "path", "description": "ID del registro", "required": true, "type": "integer"}], "responses": {"200": {"description": "Eliminación exitosa", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "string"}}}}, "403": {"description": "No autorizado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}, "404": {"description": "Registro no encontrado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["registro-vacunacion"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/users/login/": {"post": {"operationId": "users_login_create", "description": "Autentica un usuario y retorna tokens JWT (access y refresh) más datos del usuario. El refresh token se almacena en una cookie segura.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"required": ["username", "password"], "type": "object", "properties": {"username": {"type": "string"}, "password": {"type": "string", "format": "password"}}, "example": {"username": "usuario", "password": "secreta"}}}], "responses": {"200": {"description": "Login exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "object", "properties": {"access": {"type": "string"}, "refresh": {"type": "string"}, "usuario": {"type": "object"}}}}}}, "400": {"description": "Credenciales inválidas", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}, "500": {"description": "Usuario sin perfil extendido", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["users"]}, "parameters": []}, "/users/logout/": {"post": {"operationId": "users_logout_create", "description": "Cierra la sesión del usuario y revoca el refresh token. El refresh token se elimina de las cookies.", "parameters": [], "responses": {"200": {"description": "Logout exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "string"}}}}, "401": {"description": "Token inválido o expirado", "schema": {"type": "object", "properties": {"code": {"type": "string"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["users"]}, "parameters": []}, "/users/register/": {"post": {"operationId": "users_register_create", "description": "Registra un nuevo usuario (paciente, médico o admin). El payload varía según el rol. Devuelve los datos del usuario creado.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"required": ["usuario", "nombre", "telefono", "rol_id"], "type": "object", "properties": {"usuario": {"type": "object"}, "nombre": {"type": "string"}, "telefono": {"type": "string"}, "rol_id": {"type": "integer"}, "medico": {"type": "object", "nullable": true}, "paciente": {"type": "object", "nullable": true}}, "example": {"usuario": {"nombre_usuario": "nuevo", "correo": "nuevo@mail.com", "contrasena": "Fuerte123"}, "nombre": "Nuevo Usuario", "telefono": "3119998888", "rol_id": 2, "paciente": {"tipo_documento": "CC", "documento": "123456789", "nombres": "Carlos", "apellidos": "Gómez", "fecha_de_nacimiento": "1990-05-20", "genero": "M", "direccion": "Calle 123", "telefono": "3109876543", "correo": "paciente@mail.com"}}}}], "responses": {"201": {"description": "Registro exitoso", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string", "nullable": true}, "data": {"type": "object"}}}}, "400": {"description": "Error de validación", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "object"}, "data": {"type": "string", "nullable": true}}}}, "500": {"description": "Error inesperado", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["users"]}, "parameters": []}, "/users/token/refresh/": {"post": {"operationId": "users_token_refresh_create", "description": "Refresca el token de acceso usando el refresh_token almacenado en cookies. Devuelve un nuevo access token si el refresh es válido.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/TokenRefresh"}}], "responses": {"200": {"description": "Token refrescado exitosamente", "schema": {"type": "object", "properties": {"access": {"type": "string"}, "refresh": {"type": "string"}}}}, "401": {"description": "No se encontró el token de actualización", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}, "400": {"description": "Token inválido", "schema": {"type": "object", "properties": {"code": {"type": "integer"}, "error": {"type": "string"}, "data": {"type": "string", "nullable": true}}}}}, "tags": ["users"]}, "parameters": []}, "/vacunas/": {"get": {"operationId": "vacunas_list", "description": "Lista todas las vacunas activas. Solo los administradores pueden ver las vacunas.", "parameters": [], "responses": {"200": {"description": "Listado exitoso", "schema": {"type": "array", "items": {"type": "object"}}}, "403": {"description": "No autorizado", "schema": {"type": "object"}}}, "tags": ["vacunas"]}, "parameters": []}, "/vacunas/actualizar/": {"put": {"operationId": "vacunas_actualizar_update", "description": "Actualiza los datos de una vacuna existente. Solo los administradores pueden actualizar.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"required": ["id"], "type": "object", "properties": {"id": {"type": "integer"}, "nombre_comercial": {"type": "string"}, "nombre_tecnico": {"type": "string"}, "fabricante": {"type": "string"}, "dosis_requeridas": {"type": "integer"}, "intervalo_dosis": {"type": "integer"}, "condiciones_almacen": {"type": "string"}, "via_administracion": {"type": "string"}, "grupo_etario": {"type": "string"}, "fecha_registro_invima": {"type": "date"}, "codigo_cums": {"type": "string"}, "codigo_h17": {"type": "string"}}, "example": {"id": 1, "nombre_comercial": "Vacuna Modificada", "nombre_tecnico": "Vacuna Técnica", "fabricante": "Pharma Updated", "dosis_requeridas": 3, "intervalo_dosis": 45, "condiciones_almacen": "Congelado", "via_administracion": "IM", "grupo_etario": "Adultos", "fecha_registro_invima": "2025-01-15", "codigo_cums": "CUMS001", "codigo_h17": "H17001"}}}], "responses": {"200": {"description": "Vacuna actualizada exitosamente", "schema": {"type": "object"}}, "400": {"description": "Error de validación", "schema": {"type": "object"}}, "403": {"description": "No autorizado", "schema": {"type": "object"}}, "404": {"description": "Vacuna no encontrada", "schema": {"type": "object"}}}, "tags": ["vacunas"]}, "parameters": []}, "/vacunas/registrar/": {"post": {"operationId": "vacunas_registrar_create", "description": "Registra una nueva vacuna. Solo los administradores pueden registrar vacunas.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"required": ["nombre_comercial", "nombre_tecnico", "fabricante", "dosis_requeridas", "intervalo_dosis", "condiciones_almacen", "via_administracion", "grupo_etario", "fecha_registro_invima", "codigo_cums", "codigo_h17"], "type": "object", "properties": {"nombre_comercial": {"type": "string"}, "nombre_tecnico": {"type": "string"}, "fabricante": {"type": "string"}, "dosis_requeridas": {"type": "integer"}, "intervalo_dosis": {"type": "integer"}, "condiciones_almacen": {"type": "string"}, "via_administracion": {"type": "string"}, "grupo_etario": {"type": "string"}, "fecha_registro_invima": {"type": "date"}, "codigo_cums": {"type": "string"}, "codigo_h17": {"type": "string"}}, "example": {"nombre_comercial": "VacunaX", "nombre_tecnico": "Antígeno Recombinante X", "fabricante": "BioLab", "dosis_requeridas": 2, "intervalo_dosis": 30, "condiciones_almacen": "2-8°C", "via_administracion": "Intramuscular", "grupo_etario": "Adultos", "fecha_registro_invima": "2025-01-15", "codigo_cums": "ABC123456", "codigo_h17": "H17-XYZ789"}}}], "responses": {"201": {"description": "Vacuna registrada exitosamente", "schema": {"type": "object"}}, "400": {"description": "Error de validación", "schema": {"type": "object"}}, "403": {"description": "No autorizado", "schema": {"type": "object"}}}, "tags": ["vacunas"]}, "parameters": []}, "/vacunas/{id}/eliminar/": {"delete": {"operationId": "vacunas_eliminar_delete", "description": "Elimina (inactiva) una vacuna por ID. Solo los administradores pueden eliminar.", "parameters": [{"name": "id", "in": "path", "description": "ID de la vacuna", "required": true, "type": "integer"}], "responses": {"200": {"description": "Vacuna eliminada exitosamente", "schema": {"type": "object"}}, "400": {"description": "Vacuna ya inactiva", "schema": {"type": "object"}}, "403": {"description": "No autorizado", "schema": {"type": "object"}}, "404": {"description": "Vacuna no encontrada", "schema": {"type": "object"}}}, "tags": ["vacunas"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}}, "definitions": {"Bitacora": {"required": ["accion", "modulo"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "accion": {"title": "Accion", "type": "string", "maxLength": 100, "minLength": 1}, "modulo": {"title": "Modulo", "type": "string", "maxLength": 100, "minLength": 1}, "fecha_hora": {"title": "Fecha hora", "type": "string", "format": "date-time", "readOnly": true}, "detalle": {"title": "Detalle", "type": "string", "x-nullable": true}, "ip_origen": {"title": "Ip origen", "type": "string", "maxLength": 50, "x-nullable": true}, "exitoso": {"title": "Exitoso", "type": "boolean"}, "activo": {"title": "Activo", "type": "boolean"}, "usuario": {"title": "Usuario", "type": "integer", "x-nullable": true}}}, "CitaVacunacion": {"required": ["paciente", "vacuna", "fecha_cita", "hora_cita", "centro_vacunacion"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "paciente": {"title": "Paciente", "type": "integer"}, "vacuna": {"title": "Vacuna", "type": "integer"}, "medico": {"title": "Medico", "type": "integer", "x-nullable": true}, "fecha_cita": {"title": "Fecha cita", "type": "string", "format": "date"}, "hora_cita": {"title": "Hora cita", "type": "string"}, "centro_vacunacion": {"title": "Centro vacunacion", "type": "string", "maxLength": 50, "minLength": 1}, "estado_cita": {"title": "Estado cita", "type": "string", "enum": ["pendiente", "confirmada", "cancelada", "completada"]}, "observaciones": {"title": "Observaciones", "type": "string", "x-nullable": true}, "creado_en": {"title": "Creado en", "type": "string", "format": "date-time", "readOnly": true}, "activo": {"title": "Activo", "type": "boolean"}}}, "Dosis": {"required": ["numero_dosis", "intervalo_dias", "esquema", "vacuna"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "numero_dosis": {"title": "Numero dosis", "type": "integer", "maximum": 9223372036854775807, "minimum": 0}, "intervalo_dias": {"title": "Intervalo dias", "type": "integer", "maximum": 9223372036854775807, "minimum": 0}, "esquema": {"title": "Esquema", "type": "integer"}, "vacuna": {"title": "Vacuna", "type": "integer"}, "descripcion_dosis": {"title": "Descripcion dosis", "type": "string", "x-nullable": true}, "activo": {"title": "Activo", "type": "boolean", "readOnly": true}}}, "EsquemaVacunacion": {"required": ["nombre_esquema", "descripcion_esquema", "edad_minima_meses", "edad_maxima_meses"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "nombre_esquema": {"title": "Nombre esquema", "type": "string", "maxLength": 100, "minLength": 1}, "descripcion_esquema": {"title": "Descripcion esquema", "type": "string", "minLength": 1}, "edad_minima_meses": {"title": "Edad minima meses", "type": "integer", "maximum": 9223372036854775807, "minimum": 0}, "edad_maxima_meses": {"title": "Edad maxima meses", "type": "integer", "maximum": 9223372036854775807, "minimum": 0}, "condiciones_especiales": {"title": "Condiciones especiales", "type": "string", "x-nullable": true}, "activo": {"title": "Activo", "type": "boolean"}, "id_informe": {"title": "Id informe", "type": "integer", "maximum": 9223372036854775807, "minimum": -9223372036854775808, "x-nullable": true}}}, "InventarioVacunas": {"required": ["vacuna", "lote", "fecha_vencimiento", "cantidad_total", "cantidad_disponible", "centro_vacunacion"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "vacuna": {"title": "Vacuna", "type": "integer"}, "lote": {"title": "Lote", "type": "string", "maxLength": 30, "minLength": 1}, "fecha_vencimiento": {"title": "Fecha vencimiento", "type": "string", "format": "date"}, "cantidad_total": {"title": "Cantidad total", "type": "integer", "maximum": 9223372036854775807, "minimum": -9223372036854775808}, "cantidad_disponible": {"title": "Cantidad disponible", "type": "integer", "maximum": 9223372036854775807, "minimum": -9223372036854775808}, "centro_vacunacion": {"title": "Centro vacunacion", "type": "string", "maxLength": 100, "minLength": 1}, "fecha_registro": {"title": "Fecha registro", "type": "string", "format": "date-time", "readOnly": true}, "activo": {"title": "Activo", "type": "boolean", "readOnly": true}}}, "Medico": {"required": ["nombres", "apellidos", "documento", "especialidad", "registro_medico", "telefono", "correo"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "nombres": {"title": "Nombres", "type": "string", "maxLength": 100, "minLength": 1}, "apellidos": {"title": "Apellidos", "type": "string", "maxLength": 100, "minLength": 1}, "documento": {"title": "Documento", "type": "string", "maxLength": 20, "minLength": 1}, "especialidad": {"title": "Especialidad", "type": "string", "maxLength": 100, "minLength": 1}, "registro_medico": {"title": "Registro medico", "type": "string", "maxLength": 50, "minLength": 1}, "telefono": {"title": "Telefono", "type": "string", "maxLength": 20, "minLength": 1}, "correo": {"title": "Correo", "type": "string", "format": "email", "maxLength": 100, "minLength": 1}, "activo": {"title": "Activo", "type": "boolean", "readOnly": true}, "nombre_completo": {"title": "Nombre completo", "type": "string", "readOnly": true}}}, "PacienteEsquema": {"required": ["paciente", "esquema"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "paciente": {"title": "Paciente", "type": "integer"}, "esquema": {"title": "Esquema", "type": "integer"}, "fecha_asignacion": {"title": "Fecha asignacion", "type": "string", "format": "date", "readOnly": true}, "activo": {"title": "Activo", "type": "boolean"}}}, "Paciente": {"required": ["tipo_documento", "documento", "nombres", "apellidos", "fecha_de_nacimiento", "genero", "direccion", "telefono", "correo"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "tipo_documento": {"title": "Tipo documento", "type": "string", "enum": ["CC", "TI", "CE", "PA"]}, "documento": {"title": "Documento", "type": "string", "maxLength": 20, "minLength": 1}, "nombres": {"title": "Nombres", "type": "string", "maxLength": 50, "minLength": 1}, "apellidos": {"title": "Apellidos", "type": "string", "maxLength": 50, "minLength": 1}, "fecha_de_nacimiento": {"title": "Fecha de nacimiento", "type": "string", "format": "date"}, "genero": {"title": "Genero", "type": "string", "enum": ["M", "F", "O"]}, "direccion": {"title": "Direccion", "type": "string", "maxLength": 100, "minLength": 1}, "telefono": {"title": "Telefono", "type": "string", "maxLength": 20, "minLength": 1}, "correo": {"title": "Correo", "type": "string", "maxLength": 50, "minLength": 1}, "activo": {"title": "Activo", "type": "boolean"}}}, "RegistroVacunacion": {"required": ["paciente", "vacuna", "medico", "lote", "ubicacion"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "paciente": {"title": "Paciente", "type": "integer"}, "vacuna": {"title": "Vacuna", "type": "integer"}, "medico": {"title": "Medico", "type": "integer"}, "usuario": {"title": "Usuario", "type": "integer", "readOnly": true}, "fecha_aplicacion": {"title": "Fecha aplicacion", "type": "string", "format": "date-time", "readOnly": true}, "lote": {"title": "Lote", "type": "string", "maxLength": 50, "minLength": 1}, "observaciones": {"title": "Observaciones", "type": "string", "x-nullable": true}, "cita": {"title": "Cita", "type": "integer", "x-nullable": true}, "ubicacion": {"title": "Ubicacion", "type": "string", "maxLength": 150, "minLength": 1}, "firma_digital": {"title": "Firma digital", "type": "string", "x-nullable": true}, "activo": {"title": "Activo", "type": "boolean"}}}, "TokenRefresh": {"required": ["refresh"], "type": "object", "properties": {"refresh": {"title": "Refresh", "type": "string", "minLength": 1}, "access": {"title": "Access", "type": "string", "readOnly": true, "minLength": 1}}}}}